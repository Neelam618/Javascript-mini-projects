<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-do list</title>
</head>
<body>
        <div class="container">
            <h1>To-Do List</h1>
                    <input type="text" id="input" placeholder="Add an item">
                    <button type="button" id="addBtn">Add</button>
                    <div id="error-msg" style="display: none;">Please add an item</div>
            <ol id="list"></ol>
        </div>

    <script>
        input.focus();
 
        //Add click event listener to button and call function
        document.getElementById('addBtn').addEventListener('click', verifyAndAdd);

        function createLiElement(){
            let inputValue = document.getElementById('input').value;   //grabs inputted text value
    
            //creates new li tag in ol
            let liElement = document.createElement('li');
            liElement.innerText = inputValue;

            // add delete btn in li element
            let deleteBtn = document.createElement('button');
            deleteBtn.innerText = "Delete"; 
            deleteBtn.addEventListener('click', deleteRow);
            //join button element inside li element
            liElement.appendChild(deleteBtn);
            return liElement;
        }

        function add(){
            // join li element in ol
            document.getElementById('list').appendChild(createLiElement());
            // clear input box
            document.getElementById('input').value = "";
            //focus on input box
            input.focus();
        }
        // //Alternative function to add()
        // function addUsingInnerHtml(){
        //     let inputValue = document.getElementById('input').value;   //grabs inputted text
    
        //     let listElement = document.getElementById('list');
        //     listElement.innerHTML = listElement.innerHTML + `
        //         <li>${inputValue} <button onclick = "deleteRow()">Delete</button></li>
        //     `;
        //     // clear input box
        //     document.getElementById('input').value = "";

        //     //focus on input box
        //     input.focus();
        // }

        function verifyAndAdd(){
            displayOrHideErrorMsg();
            if(input.value == ""){
                // alert("Input is empty");
                input.focus();
            }
            else{
                add();
            }
        }
        
        //Delete list item
        function deleteRow(){
            event.target.parentNode.remove();    //OR this.parentNode.remove();          //'this' here is delete button element 
            // console.log(event.target);
            input.focus();            
        }
        
        //click add button on keyboard enter

        // Execute a function when the user releases a key on the keyboard
        input.addEventListener("keyup", function(event) {                                //you can also remove event parameter and it works
            // Number 13 is the "Enter" key on the keyboard
            if(event.keyCode === 13){                                   
            // Trigger the add button element with a click
            verifyAndAdd();
            }
        });

        


        function displayOrHideErrorMsg(){
            let errorMsg = document.getElementById('error-msg');

            if (document.getElementById('input').value == ""){
                errorMsg.style.display = "block";
            }
            else if(document.getElementById('input').value !== ""){
                errorMsg.style.display = "none";
            }
        }


    </script>
</body>
</html>